{
  "kind": "build_request",
  "title": "Fix PIX QR code display bug in checkout",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Debug and fix the PIX QR code generation and display logic in the checkout flow to ensure the QR code appears correctly when users select PIX payment method",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "corrija bugs na criacao do qr code pix . ele nao esta aparecendo!"
        ]
      },
      "acceptanceCriteria": [
        "PIX QR code image renders visibly in the checkout page when PIX payment is selected",
        "QR code payload is generated correctly using the pixPayload utility",
        "QR code image URL is generated successfully via qrCodeGenerator",
        "Copy-to-clipboard functionality works for both QR payload and PIX key",
        "No console errors related to QR code generation or display"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Verify that the PixQrCodeDisplay component properly receives the PIX email key and displays it alongside the QR code",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ]
      },
      "acceptanceCriteria": [
        "PIX email key is passed correctly to PixQrCodeDisplay component",
        "Email key displays below the QR code with copy button",
        "Component handles loading and error states appropriately"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Check CheckoutPage integration with payment providers to ensure PIX QR code display is triggered correctly for both Gateway and PagBank payment flows",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ]
      },
      "acceptanceCriteria": [
        "PIX QR code displays when using Gateway provider",
        "PIX QR code displays when using PagBank provider",
        "Proper conditional rendering based on selected payment provider",
        "Payment amount is correctly passed to QR code generation"
      ]
    }
  ],
  "constraints": [
    "Do not modify the PIX payload generation algorithm in frontend/src/lib/payments/pixPayload.ts unless a format error is identified",
    "Maintain existing QR code API integration with qrserver.com in frontend/src/lib/payments/qrCodeGenerator.ts",
    "Preserve the PixQrCodeDisplay component's copy-to-clipboard functionality"
  ],
  "nonGoals": [
    "Adding new payment methods beyond PIX",
    "Redesigning the checkout page layout",
    "Implementing payment webhook handling",
    "Adding payment confirmation notifications"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}