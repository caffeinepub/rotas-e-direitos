{
  "kind": "build_request",
  "title": "Add financial loss calculator for drivers",
  "projectName": "Rotas e Direitos",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Create a comprehensive financial loss calculator that allows drivers to input their daily earnings, work days per week, and deactivation date to calculate weekly, monthly, and accumulated losses",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-10"
        ],
        "quotes": [
          "calculadora de perdas financeiras"
        ]
      },
      "acceptanceCriteria": [
        "Calculator displays input fields for daily earnings, work days per week, and deactivation date",
        "System calculates and displays weekly loss amount in BRL",
        "System calculates and displays monthly loss amount in BRL",
        "System calculates and displays accumulated total loss in BRL",
        "Calculator shows a projection chart visualizing loss over time (up to 90 days)",
        "All calculations are accurate based on the input values"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Enhance the existing loss calculator with PDF export functionality that generates a downloadable financial loss report including all calculated values, platform information, and a summary of the driver's situation",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-10"
        ],
        "quotes": [
          "exportação em PDF"
        ]
      },
      "acceptanceCriteria": [
        "User can click a button to generate and download a PDF report of their financial losses",
        "PDF includes driver's platform, deactivation date, daily earnings, and work schedule",
        "PDF displays all calculated loss values (weekly, monthly, accumulated)",
        "PDF includes the loss projection over time",
        "PDF is properly formatted and readable",
        "Download initiates immediately upon button click"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Implement a comprehensive dark mode theme optimized specifically for drivers, ensuring all pages and components have excellent contrast, readability, and reduced eye strain during nighttime work",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-10"
        ],
        "quotes": [
          "dark mode otimizado para motoristas"
        ]
      },
      "acceptanceCriteria": [
        "All pages and components render properly in dark mode",
        "Text has high contrast against dark backgrounds for readability",
        "Interactive elements (buttons, inputs, links) are clearly visible in dark mode",
        "Color scheme avoids harsh whites and uses softer tones to reduce eye strain",
        "Important information and warnings remain clearly distinguishable",
        "Dark mode is consistently applied across the entire application",
        "Charts and visualizations remain legible with appropriate color adjustments"
      ]
    }
  ],
  "constraints": [
    "Do not modify the backend schema or Motoko actor structure",
    "Do not edit immutable frontend paths: useInternetIdentity.ts, useInternetIdentity.tsx, useActor.ts, main.tsx, and components/ui",
    "Use only React, Tailwind CSS, Shadcn, and React Query for frontend implementation",
    "Do not integrate external AI APIs (OpenAI, Anthropic, etc.) for the legal defense generator"
  ],
  "nonGoals": [
    "Integration with external AI services for legal defense generation",
    "Real-time collaboration features",
    "Multi-language support beyond Portuguese",
    "Mobile app development (PWA only)",
    "Backend migration or schema changes"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}